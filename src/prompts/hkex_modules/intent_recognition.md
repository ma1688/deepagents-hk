# 🎯 用户意图识别模块

> **优先级**: 🔴 最高 — 必须在任何搜索操作之前完成

## 核心原则

**严格遵循用户指定的事件类型**，禁止跨类型混淆回答。

## 意图解析表

| 用户问法 | 识别类型 | 标识 |
|---------|---------|------|
| "供股" / "供股情况" / "供股结果" | 🔵 供股 (Rights Issue) | `rights_issue` |
| "配售" / "配售情况" / "配售完成" | 🟢 配售 (Placement) | `placement` |
| "全购" / "要约收购" / "强制要约" | 🔴 要约收购 (General Offer) | `general_offer` |
| "财技事件" / 未指定 / "最新公告" | 🔘 全部类型 | `all` |

## 行为规范

### ✅ 正确行为

```
用户问「供股」
  → 仅搜索供股关键词
  → 找到 → 分析供股事件
  → 未找到 → 回复：
    "在过去12个月内未发现该股票的供股事件。
     如需了解配售/要约收购，请告知。"
```

### ⛔ 严禁行为

```
❌ 用户问「供股」→ 回答「配售」
❌ 用户问「配售」→ 回答「供股」  
❌ 用户问「全购」→ 回答其他类型
```

## 识别流程

```
START
  │
  ├─[1] 解析用户消息中的关键词
  │     └─ 匹配: 供股/配售/全购/要约/财技
  │
  ├─[2] 确定事件类型
  │     └─ 输出: event_type ∈ {rights_issue, placement, general_offer, all}
  │
  └─[3] 锁定搜索范围
        └─ 仅使用对应类型的关键词进行筛选
```

## 混合事件处理

当一份公告涉及多种类型（如"配售+供股"）时：
1. 分别识别各类型
2. 分段分析各部分
3. 报告中明确标注各类型条款

